var skitch={initLibs:function(t,n,r){if(n=="js"){if(t=="$"||t=="jquery"||t=="jQuery"){var i=document.getElementsByTagName("head")[0];var s=document.createElement("script");s.type="text/javascript";s.src="http://code.jquery.com/jquery-latest.min.js";s.onreadystatechange=r;s.onload=r;i.appendChild(s);console.log("jquery js")}if(t=="bootstrap"){var i=document.getElementsByTagName("head")[0];var s=document.createElement("script");s.type="text/javascript";s.src="http://twitter.github.io/bootstrap/assets/js/bootstrap.min.js";s.onreadystatechange=r;s.onload=r;i.appendChild(s);console.log("bootstrap js")}}else if(n=="css"){if(t=="bootstrap"){var o=document;var u="myCss";if(!o.getElementById(u)){var i=o.getElementsByTagName("head")[0];var a=o.createElement("link");a.id=u;a.rel="stylesheet";a.type="text/css";a.href="http://twitter.github.io/bootstrap/assets/css/bootstrap.css";a.media="all";a.onreadystatechange=r;a.onload=r;i.appendChild(a);console.log("bootstrap css")}}}},runScript:function(t,n,r){if(t=="js"){var i=new Function(n);i();console.log("ran some stringed code");r()}if(t=="c"){var s=n.replace(/^#include\s+$<jquery>/,"skitch.initLibs('jquery','js',function(){\nmain();\n}\n);");s=n.replace(/^#include\s+$<bootstrapjs>/,"skitch.initLibs('bootstrap','js',function(){\nmain();\n}\n);");var o=s.replace("int main(){","function main(){");console.log(o);r()}},injectHTML:function(t,n,r){mydoc=document.getElementById(t).contentWindow.document;mydoc.open();mydoc.write(n);mydoc.close();r()}}
